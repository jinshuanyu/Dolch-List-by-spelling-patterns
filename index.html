<!DOCTYPE html>
<html lang="zh-Hant"> <!-- Set language to Traditional Chinese -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dolch é«˜é »è©æ‹¼è®€è¡¨</title> <!-- Changed overall title -->
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Noto Sans TC font from Google Fonts -->
    <!-- Also include Noto Sans for better IPA rendering -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: "Noto Sans TC", sans-serif; /* Use Noto Sans TC for consistent Chinese font */
            background-color: #f0f8ff; /* æ·ºè—ç™½è‰²èƒŒæ™¯ (æ›´æŸ”å’Œ) */
            color: #475569; /* æ·±è—ç°è‰²æ–‡å­— (æŸ”å’Œ) */
            font-size: 16px; /* Base font size for better mobile readability */
            /* Body itself will handle the main scroll now as header is not sticky */
        }
        /* The word-item styles remain the same for individual word cards */
        .word-item {
            display: flex;
            flex-direction: column; /* Stack word and IPA vertically */
            align-items: flex-start; /* Align text to the left */
            justify-content: space-between;
            background-color: #ffffff;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem; /* åœ“è§’æ›´æ˜é¡¯ */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); /* é™°å½±æ›´æ˜é¡¯ */
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .word-item-content {
            display: flex;
            flex-direction: column; /* Stack English, Chinese, IPA vertically */
            align-items: flex-start;
            width: 100%;
            margin-bottom: 0.5rem; /* Space between word/IPA/translation and button */
        }
        .word-text {
            font-size: 1.25rem; /* text-xl - Increased for better mobile visibility */
            font-weight: 500; /* medium */
            color: #1a202c; /* Darker for primary word */
            margin-bottom: 0.25rem;
        }
        .translation-text {
            font-size: 1rem; /* text-base - Increased */
            color: #6b7280; /* Gray for translation */
            margin-bottom: 0.25rem;
        }
        .ipa-text {
            font-size: 1.125rem; /* text-lg - Increased */
            color: #4a5568; /* Slightly darker gray for IPA */
            margin-top: 0.25rem;
            font-weight: 500; /* Make IPA slightly bolder */
            font-family: "Noto Sans", sans-serif; /* Explicitly use Noto Sans for IPA for better glyph support */
        }
        .word-item:hover {
            transform: translateY(-3px); /* è¼•å¾®ä¸Šæµ®æ•ˆæœ */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
        }
        .play-button {
            background-color: #60a5fa; /* æŸ”å’Œè—è‰² (blue-400) */
            color: white;
            padding: 0.5rem 0.75rem; /* Adjusted padding for icon-only button */
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center; /* Center icon */
            gap: 0.5rem;
            margin-left: auto; /* Push button to the right */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .play-button:hover {
            background-color: #3b82f6; /* æŸ”å’Œè—è‰² (blue-500) */
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        .play-button:active {
            transform: translateY(0);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 1rem;
            height: 1rem;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .active-tab {
            background-color: #e0f2fe; /* æ·ºè—è‰² 100 */
            color: #1e40af; /* æ·±è—è‰² 800 */
            border-bottom: 2px solid #60a5fa; /* æŸ”å’Œè—è‰² */
            font-weight: 600; /* Slightly bolder for active tab */
        }
        /* è‡ªè¨‚æ²è»¸æ¨£å¼ï¼Œæå‡ç¾è§€åº¦ */
        /* Apply to the body for the main page scroll */
        body::-webkit-scrollbar {
            width: 8px;
        }
        body::-webkit-scrollbar-track {
            background: #f1f5f9; /* æ¿å²©è‰² 100 */
            border-radius: 10px;
        }
        body::-webkit-scrollbar-thumb {
            background: #aab8c9; /* æ›´æŸ”å’Œçš„è—ç°è‰² */
            border-radius: 10px;
        }
        body::-webkit-scrollbar-thumb:hover {
            background: #7a8ba3; /* æ·±ä¸€é»çš„è—ç°è‰² */
        }

        /* Styles for inner scrollable components if their content overflows */
        .inner-scroll-area::-webkit-scrollbar {
            width: 8px;
        }
        .inner-scroll-area::-webkit-scrollbar-track {
            background: #e2e8f0; /* æ·ºç°è‰² */
            border-radius: 10px;
        }
        .inner-scroll-area::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* ä¸­ç°è‰² */
            border-radius: 10px;
        }
        .inner-scroll-area::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* æ·±ç°è‰² */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <header class="bg-gradient-to-r from-blue-400 to-blue-600 text-white p-4 shadow-lg"> <!-- Removed sticky, top-0, z-10 for overall page scroll -->
        <h1 class="text-3xl font-bold text-center">Dolch é«˜é »è©æ‹¼è®€è¡¨</h1>
        <p class="text-center text-base mt-1">é»æ“Šæ‹¼å¯«æ¨¡å¼ä»¥æ¢ç´¢å–®å­—ä¸¦è†è½å…¶ç™¼éŸ³ï¼</p>

        <div class="bg-blue-100 text-blue-700 p-3 mt-4 mx-auto max-w-2xl rounded-md shadow-sm border-l-4 border-blue-300">
            <p class="mb-1 text-base">Dolch é«˜é »è©å­—è¡¨æ¶µè“‹ 220 å€‹å¸¸ç”¨è‹±èªå–®å­—ï¼Œæœ‰åŠ©æ–¼æé«˜ã€é–±è®€æµæš¢åº¦ã€‘ã€‚</p>
            <p class="mb-1 text-base">æœ¬è¡¨æŒ‰ã€æ‹¼è®€è¦å‰‡ã€‘ï¼Œåˆ†åˆ—å‡ºä¸è¦å‰‡å’Œå„ç¨®æ‹¼è®€æ¨¡å¼å–®å­—ã€‚</p>
            <p class="mb-1 text-base">å»ºè­°ã€åŒé¡å‹é›†ä¸­ç·´ç¿’ã€‘ï¼Œä»¥åŠ å¼·å­¸ç¿’æ•ˆæœã€‚</p>
            <p class="text-sm text-blue-600">è³‡æ–™ä¾†æºï¼š<a href="https://files.readinguniverse.org/PDFs/Dolch-Word-List-by-Phonics-Spelling-Pattern-1.pdf" target="_blank" class="text-blue-600 hover:underline">ReadingUniverse.org - Dolch Word List by Phonics Spelling Pattern PDF</a></p>
        </div>
    </header>

    <!-- Main content area, now allows body to scroll -->
    <div class="flex flex-1">
        <!-- å´é‚Šæ¬„å°èˆª -->
        <nav class="w-[40%] max-w-80 bg-gray-100 p-4 border-r border-gray-200 overflow-y-auto inner-scroll-area"> <!-- Added max-w-80 for responsive width -->
            <h2 class="text-xl font-semibold mb-4 text-gray-700">æ‹¼å¯«æ¨¡å¼</h2>
            <ul id="category-list">
                <!-- é¡åˆ¥å°‡åœ¨æ­¤è™•å‹•æ…‹è¼‰å…¥ -->
            </ul>
        </nav>

        <!-- ä¸»å…§å®¹å€ -->
        <main id="main" class="flex-1 p-6 overflow-y-auto inner-scroll-area"> <!-- Added id="main" and overflow-y-auto for internal scrolling -->
            <h2 id="current-category-title" class="text-2xl font-bold mb-6 text-blue-700">è«‹é¸æ“‡ä¸€å€‹æ‹¼å¯«æ¨¡å¼</h2>

            <div id="word-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- å–®å­—å°‡åœ¨æ­¤è™•å‹•æ…‹è¼‰å…¥ -->
                <div class="word-item col-span-full text-center text-gray-500">
                    <p>è«‹å¾å·¦å´é‚Šæ¬„é¸æ“‡ä¸€å€‹æ‹¼å¯«æ¨¡å¼ä»¥æŸ¥çœ‹å–®å­—ã€‚</p>
                </div>
            </div>
            <div id="message-box" class="fixed bottom-4 right-4 bg-red-500 text-white p-3 rounded-lg shadow-xl hidden"></div>
            <p class="text-base text-gray-500 mt-6">
                éŸ³æ¨™æŒ‡å—ï¼šæ­¤ç¶²é ä½¿ç”¨ç¾å¼ç™¼éŸ³çš„ IPA éŸ³æ¨™ã€‚
                è©³æƒ…è«‹åƒè€ƒï¼š<a href="https://christinayu_english.rakosell.com/zh/page/american-ipa-guide" target="_blank" class="text-blue-600 hover:underline">ç¾å¼è‹±èª IPA åœ‹éš›éŸ³æ¨™æŒ‡å—</a>
            </p>
        </main>
    </div>

    <script type="module">
        // Function to show custom message box
        function showMessageBox(message, isError = false) {
            const msgBox = document.getElementById('message-box');
            msgBox.textContent = message;
            if (isError) {
                msgBox.classList.remove('bg-green-500');
                msgBox.classList.add('bg-red-500');
            } else {
                msgBox.classList.remove('bg-red-500');
                msgBox.classList.add('bg-green-500');
            }
            msgBox.classList.remove('hidden');
            setTimeout(() => {
                msgBox.classList.add('hidden');
            }, 3000); // Hide after 3 seconds
        }

        // Simple IPA generation function
        function getIpaForWord(word) {
            const lowerWord = word.toLowerCase();
            switch (lowerWord) {
                // Irregular Dolch Words
                case "again": return "/É™ËˆÉ¡É›n/";
                case "carry": return "/ËˆkÃ¦ri/";
                case "from": return "/frÊŒm/";
                case "only": return "/ËˆoÊŠnli/";
                case "today": return "/tÉ™ËˆdeÉª/";
                case "very": return "/ËˆvÉ›ri/";
                case "what": return "/wÉ‘t/";
                case "your": return "/jÊŠr/";
                case "because": return "/bÉªËˆkÊŒz/";
                case "does": return "/dÊŒz/";
                case "goes": return "/É¡oÊŠz/";
                case "please": return "/pliz/";
                case "together": return "/tÉ™ËˆÉ¡É›Ã°Éš/";
                case "walk": return "/wÉ”k/";
                case "who": return "/hu/";
                case "been": return "/bÉªn/";
                case "don't": return "/doÊŠnt/";
                case "laugh": return "/lÃ¦f/";
                case "said": return "/sÉ›d/";
                case "two": return "/tu/";
                case "warm": return "/wÉ”rm/";
                case "work": return "/wÉk/";
                case "buy": return "/baÉª/";
                case "four": return "/fÉ”r/";
                case "of": return "/ÊŒv/";
                case "their": return "/Ã°É›r/";
                case "use": return "/juz/";
                case "was": return "/wÊŒz/";
                case "you": return "/ju/";
                case "good-bye": return "/ËŒÉ¡ÊŠdËˆbaÉª/";

                // Common Irregular Pattern words
                case "has": return "/hÃ¦z/";
                case "is": return "/Éªz/";
                case "as": return "/Ã¦z/";
                case "his": return "/hÉªz/";
                case "have": return "/hÃ¦v/";
                case "give": return "/É¡Éªv/";
                case "live": return "/lÉªv/";
                case "some": return "/sÊŒm/";
                case "come": return "/kÊŒm/";
                case "done": return "/dÊŒn/";
                case "to": return "/tu/";
                case "do": return "/du/";
                case "into": return "/ËˆÉªntu/";
                case "where": return "/wÉ›r/";
                case "there": return "/Ã°É›r/";
                case "these": return "/Ã°iz/";
                case "those": return "/Ã°oÊŠz/";
                case "all": return "/É”l/";
                case "call": return "/kÉ”l/";
                case "fall": return "/fÉ”l/";
                case "small": return "/smÉ”l/";
                case "ball": return "/bÉ”l/";
                case "could": return "/kÊŠd/";
                case "would": return "/wÊŠd/";
                case "were": return "/wÉ/";
                case "are": return "/É‘r/";
                case "old": return "/oÊŠld/";
                case "cold": return "/koÊŠld/";
                case "told": return "/toÊŠld/";
                case "hold": return "/hoÊŠld/";
                case "both": return "/boÊŠÎ¸/";
                case "find": return "/faÉªnd/";
                case "kind": return "/kaÉªnd/";
                case "once": return "/wÊŒns/";
                case "one": return "/wÊŒn/";
                case "want": return "/wÉ‘nt/";
                case "wash": return "/wÉ‘Êƒ/";
                case "any": return "/ËˆÉ›ni/";
                case "many": return "/ËˆmÉ›ni/";
                case "head": return "/hÉ›d/";
                case "bread": return "/brÉ›d/";
                case "door": return "/dÉ”r/";
                case "floor": return "/flÉ”r/";
                case "put": return "/pÊŠt/";
                case "full": return "/fÊŠl/";
                case "pull": return "/pÊŠl/";

                // Closed-Syllable Words / Short Vowels
                case "am": return "/Ã¦m/";
                case "an": return "/É™n/";
                case "and": return "/Ã¦nd/";
                case "at": return "/Ã¦t/";
                case "can": return "/kÃ¦n/";
                case "had": return "/hÃ¦d/";
                case "ran": return "/rÃ¦n/";
                case "cat": return "/kÃ¦t/";
                case "man": return "/mÃ¦n/";
                case "get": return "/É¡É›t/";
                case "let": return "/lÉ›t/";
                case "red": return "/rÉ›d/";
                case "ten": return "/tÉ›n/";
                case "yes": return "/jÉ›s/";
                case "bed": return "/bÉ›d/";
                case "egg": return "/É›É¡/";
                case "leg": return "/lÉ›É¡/";
                case "men": return "/mÉ›n/";
                case "big": return "/bÉªÉ¡/";
                case "did": return "/dÉªd/";
                case "him": return "/hÉªm/";
                case "if": return "/Éªf/";
                case "in": return "/Éªn/";
                case "it": return "/Éªt/";
                case "sit": return "/sÉªt/";
                case "six": return "/sÉªks/";
                case "pig": return "/pÉªÉ¡/";
                case "got": return "/É¡É‘t/";
                case "hot": return "/hÉ‘t/";
                case "not": return "/nÉ‘t/";
                case "on": return "/É‘n/";
                case "box": return "/bÉ‘ks/";
                case "dog": return "/dÉ‘É¡/";
                case "top": return "/tÉ‘p/";
                case "but": return "/bÊŒt/";
                case "cut": return "/kÊŒt/";
                case "run": return "/rÊŒn/";
                case "up": return "/ÊŒp/";
                case "us": return "/ÊŒs/";
                case "sun": return "/sÊŒn/";
                case "seven": return "/ËˆsÉ›vÉ™n/";
                case "upon": return "/É™ËˆpÉ‘n/";
                case "rabbit": return "/ËˆrÃ¦bÉªt/";
                case "robin": return "/ËˆrÉ‘bÉªn/";

                // Double Consonant Pattern - FLOSS(Z)
                case "off": return "/É”f/";
                case "tell": return "/tÉ›l/";
                case "well": return "/wÉ›l/";
                case "will": return "/wÉªl/";
                case "bell": return "/bÉ›l/";
                case "doll": return "/dÉ‘l/";
                case "hill": return "/hÉªl/";

                // Double Letter Consonants
                case "shall": return "/ÊƒÃ¦l/";
                case "wish": return "/wÉªÊƒ/";
                case "fish": return "/fÉªÊƒ/";
                case "much": return "/mÊŒtÊƒ/";
                case "chicken": return "/ËˆtÊƒÉªkÉªn/";
                case "that": return "/Ã°Ã¦t/";
                case "them": return "/Ã°É›m/";
                case "then": return "/Ã°É›n/";
                case "this": return "/Ã°Éªs/";
                case "with": return "/wÉªÎ¸/";
                case "when": return "/wÉ›n/";
                case "which": return "/wÉªtÊƒ/";
                case "sing": return "/sÉªÅ‹/";
                case "long": return "/lÉ”Å‹/";
                case "ring": return "/rÉªÅ‹/";
                case "song": return "/sÉ”Å‹/";
                case "thing": return "/Î¸ÉªÅ‹/";
                case "pick": return "/pÉªk/";
                case "duck": return "/dÊŒk/";

                // Consonant Blends
                case "best": return "/bÉ›st/";
                case "nest": return "/nÉ›st/";
                case "fast": return "/fÃ¦st/";
                case "just": return "/dÊ’ÊŒst/";
                case "must": return "/mÊŒst/";
                case "jump": return "/dÊ’ÊŒmp/";
                case "went": return "/wÉ›nt/";
                case "ask": return "/Ã¦sk/";
                case "thank": return "/Î¸Ã¦Å‹k/";
                case "think": return "/Î¸ÉªÅ‹k/";
                case "hand": return "/hÃ¦nd/";
                case "wind": return "/wÉªnd/"; // as in 'wind up'
                case "milk": return "/mÉªlk/";
                case "help": return "/hÉ›lp/";
                case "black": return "/blÃ¦k/";
                case "bring": return "/brÉªÅ‹/";
                case "drink": return "/drÉªÅ‹k/";
                case "stop": return "/stÉ‘p/";
                case "stick": return "/stÉªk/";
                case "grass": return "/É¡rÃ¦s/";

                // Suffixes
                case "its": return "/Éªts/";
                case "going": return "/ËˆÉ¡oÊŠÉªÅ‹/";
                case "always": return "/ËˆÉ”lweÉªz/";

                // R-Controlled Vowels
                case "car": return "/kÉ‘r/";
                case "far": return "/fÉ‘r/";
                case "farm": return "/fÉ‘rm/";
                case "farmer": return "/ËˆfÉ‘rmÉš/";
                case "start": return "/stÉ‘rt/";
                case "garden": return "/ËˆÉ¡É‘rdÉ™n/";
                case "or": return "/É”r/";
                case "for": return "/fÉ”r/";
                case "corn": return "/kÉ”rn/";
                case "morning": return "/ËˆmÉ”rnÉªÅ‹/";
                case "girl": return "/É¡Él/";
                case "bird": return "/bÉd/";
                case "first": return "/fÉst/";
                case "squirrel": return "/ËˆskwÉÉ™l/";
                case "her": return "/hÉ/";
                case "hurt": return "/hÉt/";
                case "sister": return "/ËˆsÉªstÉš/";
                case "mother": return "/ËˆmÊŒÃ°Éš/";
                case "brother": return "/ËˆbrÊŒÃ°Éš/";
                case "letter": return "/ËˆlÉ›tÉš/";
                case "paper": return "/ËˆpeÉªpÉš/";
                case "under": return "/ËˆÊŒndÉš/";
                case "after": return "/ËˆÃ¦ftÉš/";
                case "better": return "/ËˆbÉ›tÉš/";
                case "never": return "/ËˆnÉ›vÉš/";

                // Open Syllables
                case "a": return "/eÉª ; É™/";
                case "i": return "/aÉª/";
                case "be": return "/bi/";
                case "he": return "/hi/";
                case "me": return "/mi/";
                case "she": return "/Êƒi/";
                case "the": return "/Ã°i ; Ã°É™/";
                case "we": return "/wi/";
                case "no": return "/noÊŠ/";
                case "go": return "/É¡oÊŠ/";
                case "so": return "/soÊŠ/";
                case "open": return "/ËˆoÊŠpÉ™n/";
                case "over": return "/ËˆoÊŠvÉš/";
                case "by": return "/baÉª/";
                case "my": return "/maÉª/";
                case "fly": return "/flaÉª/";
                case "try": return "/traÉª/";
                case "why": return "/waÉª/";
                case "myself": return "/maÉªËˆsÉ›lf/";
                case "funny": return "/ËˆfÊŒni/";
                case "every": return "/ËˆÉ›vri/";
                case "kitty": return "/ËˆkÉªti/";
                case "pretty": return "/ËˆprÉªti/";
                case "baby": return "/ËˆbeÉªbi/";
                case "party": return "/ËˆpÉ‘rti/";

                // Consonant '-LE'
                case "little": return "/ËˆlÉªtÉ™l/";
                case "apple": return "/ËˆÃ¦pÉ™l/";
                case "table": return "/ËˆteÉªbÉ™l/";

                // Silent E
                case "ate": return "/eÉªt/";
                case "came": return "/keÉªm/";
                case "game": return "/É¡eÉªm/";
                case "name": return "/neÉªm/";
                case "gave": return "/É¡eÉªv/";
                case "made": return "/meÉªd/";
                case "make": return "/meÉªk/";
                case "take": return "/teÉªk/";
                case "cake": return "/keÉªk/";
                case "here": return "/hÉªr/";
                case "five": return "/faÉªv/";
                case "like": return "/laÉªk/";
                case "ride": return "/raÉªd/";
                case "white": return "/waÉªt/";
                case "fire": return "/faÉªr/";
                case "time": return "/taÉªm/";
                case "before": return "/bÉªËˆfÉ”r/";
                case "home": return "/hoÊŠm/";

                // Vowel Teams
                case "may": return "/meÉª/";
                case "day": return "/deÉª/";
                case "say": return "/seÉª/";
                case "way": return "/weÉª/";
                case "play": return "/pleÉª/";
                case "away": return "/É™ËˆweÉª/";
                case "birthday": return "/ËˆbÉÎ¸ËŒdeÉª/";
                case "rain": return "/reÉªn/";
                case "chair": return "/tÊƒÉ›r/";
                case "eight": return "/eÉªt/";
                case "see": return "/si/";
                case "feet": return "/fit/";
                case "keep": return "/kip/";
                case "seed": return "/sid/";
                case "sheep": return "/Êƒip/";
                case "tree": return "/tri/";
                case "they": return "/Ã°eÉª/";
                case "sleep": return "/slip/";
                case "green": return "/É¡rin/";
                case "street": return "/strit/";
                case "clean": return "/klin/";
                case "eat": return "/it/";
                case "read": return "/rid/";
                case "money": return "/ËˆmÊŒni/";
                case "light": return "/laÉªt/";
                case "right": return "/raÉªt/";
                case "night": return "/naÉªt/";
                case "own": return "/oÊŠn/";
                case "show": return "/ÊƒoÊŠ/";
                case "grow": return "/É¡roÊŠ/";
                case "snow": return "/snoÊŠ/";
                case "yellow": return "/ËˆyÉ›loÊŠ/";
                case "window": return "/ËˆwÉªndoÊŠ/";
                case "boat": return "/boÊŠt/";
                case "coat": return "/koÊŠt/";
                case "soon": return "/sun/";
                case "too": return "/tu/";
                case "school": return "/skul/";
                case "blue": return "/blu/";
                case "new": return "/nu/";
                case "good": return "/É¡ÊŠd/";
                case "look": return "/lÊŠk/";
                case "wood": return "/wÊŠd/";
                case "saw": return "/sÉ”/";
                case "draw": return "/drÉ”/";

                // Diphthongs
                case "how": return "/haÊŠ/";
                case "now": return "/naÊŠ/";
                case "cow": return "/kaÊŠ/";
                case "down": return "/daÊŠn/";
                case "flower": return "/ËˆflaÊŠÉš/";
                case "brown": return "/braÊŠn/";
                case "our": return "/aÊŠr/";
                case "out": return "/aÊŠt/";
                case "about": return "/É™ËˆbaÊŠt/";
                case "round": return "/raÊŠnd/";
                case "around": return "/É™ËˆraÊŠnd/";
                case "found": return "/faÊŠnd/";
                case "ground": return "/É¡raÊŠnd/";
                case "boy": return "/bÉ”Éª/";
                case "toy": return "/tÉ”Éª/";

                // Silent Consonant Letters
                case "write": return "/raÉªt/";
                case "know": return "/noÊŠ/";

                default:
                    return `/${lowerWord}/`;
            }
        }

        // Chinese translations for Dolch words
        const wordTranslations = {
            "again": "å†æ¬¡", "carry": "æ”œå¸¶", "from": "å¾", "only": "åƒ…åƒ…", "today": "ä»Šå¤©", "very": "éå¸¸", "what": "ä»€éº¼", "your": "ä½ çš„",
            "because": "å› ç‚º", "does": "åš (ç¬¬ä¸‰äººç¨±å–®æ•¸)", "goes": "å» (ç¬¬ä¸‰äººç¨±å–®æ•¸)", "please": "è«‹", "together": "ä¸€èµ·", "walk": "èµ°è·¯", "who": "èª°",
            "been": "æ˜¯ (å®Œæˆå¼)", "don't": "ä¸", "laugh": "ç¬‘", "said": "èªª (éå»å¼)", "two": "äºŒ", "warm": "æº«æš–çš„", "work": "å·¥ä½œ",
            "buy": "è²·", "four": "å››", "of": "çš„", "their": "ä»–å€‘çš„", "use": "ä½¿ç”¨", "was": "æ˜¯ (å–®æ•¸éå»å¼)",
            "you": "ä½ /ä½ å€‘",
            "i": "æˆ‘",
            "has": "æœ‰ (ç¬¬ä¸‰äººç¨±å–®æ•¸)", "is": "æ˜¯ (ç¬¬ä¸‰äººç¨±å–®æ•¸)", "as": "ä½œç‚º/åƒ", "his": "ä»–çš„",
            "have": "æœ‰", "give": "çµ¦äºˆ", "live": "å±…ä½",
            "some": "ä¸€äº›", "come": "ä¾†", "done": "åšå®Œ",
            "to": "åˆ°", "do": "åš", "into": "é€²å…¥",
            "where": "å“ªè£¡", "there": "é‚£è£¡",
            "these": "é€™äº›", "those": "é‚£äº›",
            "all": "æ‰€æœ‰", "call": "å‘¼å«", "fall": "è½ä¸‹", "small": "å°çš„", "ball": "çƒ",
            "could": "èƒ½ (éå»å¼)", "would": "æœƒ",
            "were": "æ˜¯ (éå»å¼)", "are": "æ˜¯",
            "old": "è€çš„", "cold": "å†·çš„", "told": "å‘Šè¨´ (éå»å¼)", "hold": "æ¡ä½", "both": "å…©è€…",
            "find": "æ‰¾åˆ°", "kind": "ç¨®é¡/å‹å–„çš„",
            "once": "ä¸€æ¬¡", "one": "ä¸€",
            "want": "æƒ³è¦", "wash": "æ´—",
            "any": "ä»»ä½•", "many": "è¨±å¤š",
            "head": "é ­", "bread": "éºµåŒ…",
            "door": "é–€", "floor": "åœ°æ¿",
            "put": "æ”¾", "full": "æ»¿çš„", "pull": "æ‹‰",
            "good-bye": "å†è¦‹",

            // Closed-Syllable Words / Short Vowels
            "am": "æ˜¯", "an": "ä¸€å€‹", "and": "å’Œ", "at": "åœ¨", "can": "èƒ½", "had": "æœ‰ (éå»å¼)", "ran": "è·‘ (éå»å¼)", "cat": "è²“", "man": "äºº",
            "get": "å¾—åˆ°", "let": "è®“", "red": "ç´…è‰²", "ten": "å", "yes": "æ˜¯", "bed": "åºŠ", "egg": "è›‹", "leg": "è…¿", "men": "ç”·äººï¼ˆè¤‡æ•¸ï¼‰",
            "big": "å¤§çš„", "did": "åš (éå»å¼)", "him": "ä»–", "if": "å¦‚æœ", "in": "åœ¨...è£¡é¢", "it": "å®ƒ", "sit": "å", "six": "å…­", "pig": "è±¬",
            "got": "å¾—åˆ° (éå»å¼)", "hot": "ç†±çš„", "not": "ä¸", "on": "åœ¨...ä¸Šé¢", "box": "ç›’å­", "dog": "ç‹—",
            "top": "é ‚éƒ¨",
            "but": "ä½†æ˜¯", "cut": "åˆ‡", "run": "è·‘", "up": "å‘ä¸Š", "us": "æˆ‘å€‘", "sun": "å¤ªé™½",
            "seven": "ä¸ƒ", "upon": "åœ¨...ä¹‹ä¸Š", "rabbit": "å…”å­", "robin": "çŸ¥æ›´é³¥",

            // Double Consonant Pattern - FLOSS(Z)
            "off": "é›¢é–‹", "tell": "å‘Šè¨´", "well": "å¥½", "will": "å°‡æœƒ", "bell": "éˆ´éº", "doll": "æ´‹å¨ƒå¨ƒ", "hill": "å°å±±",

            // Double Letter Consonants (Digraphs)
            "shall": "å°‡æœƒ", "wish": "å¸Œæœ›", "fish": "é­š",
            "much": "è¨±å¤š", "chicken": "é›è‚‰",
            "that": "é‚£å€‹", "them": "ä»–å€‘", "then": "ç„¶å¾Œ", "this": "é€™å€‹", "with": "å’Œ...ä¸€èµ·",
            "when": "ä½•æ™‚", "which": "å“ªä¸€å€‹",
            "sing": "å”±æ­Œ", "long": "é•·çš„", "ring": "æˆ’æŒ‡/éˆ´è²", "song": "æ­Œæ›²", "thing": "äº‹ç‰©",
            "pick": "æŒ‘é¸", "duck": "é´¨å­",

            // Consonant Blends
            "best": "æœ€å¥½çš„", "nest": "å·¢", "fast": "å¿«çš„", "just": "å‰›å‰›/åªæ˜¯", "must": "å¿…é ˆ", "jump": "è·³", "went": "å» (éå»å¼)",
            "ask": "å•", "thank": "è¬è¬", "think": "æ€è€ƒ", "hand": "æ‰‹", "wind": "é¢¨ (å‹•è©ï¼šçºç¹)", "milk": "ç‰›å¥¶", "help": "å¹«åŠ©",
            "black": "é»‘è‰²", "bring": "å¸¶ä¾†", "drink": "å–", "stop": "åœæ­¢", "stick": "æ£å­/é»è²¼", "grass": "è‰",

            // Suffixes
            "its": "å®ƒçš„", "going": "å» (ç¾åœ¨åˆ†è©)", "always": "ç¸½æ˜¯",

            // R-Controlled Vowels
            "car": "æ±½è»Š", "far": "é çš„", "farm": "è¾²å ´", "farmer": "è¾²å¤«", "start": "é–‹å§‹", "garden": "èŠ±åœ’",
            "or": "æˆ–è€…", "for": "ç‚ºäº†", "corn": "ç‰ç±³", "morning": "æ—©ä¸Š",
            "girl": "å¥³å­©", "bird": "é³¥", "first": "ç¬¬ä¸€", "squirrel": "æ¾é¼ ",
            "her": "å¥¹çš„", "hurt": "å—å‚·", "sister": "å§å¦¹",
            "mother": "æ¯è¦ª", "brother": "å…„å¼Ÿ",
            "letter": "ä¿¡/å­—æ¯", "paper": "ç´™", "under": "åœ¨...ä¸‹é¢", "after": "åœ¨...ä¹‹å¾Œ", "better": "æ›´å¥½", "never": "å¾ä¸",

            // Open Syllables
            "a": "ä¸€å€‹", "be": "æ˜¯", "he": "ä»–", "me": "æˆ‘", "she": "å¥¹", "the": "é€™/é‚£å€‹", "we": "æˆ‘å€‘",
            "no": "ä¸", "go": "å»", "so": "æ‰€ä»¥", "open": "æ‰“é–‹", "over": "çµæŸ/åœ¨...ä¸Šæ–¹",
            "by": "ç”±/åœ¨...æ—é‚Š", "my": "æˆ‘çš„", "fly": "é£›", "try": "å˜—è©¦", "why": "ç‚ºä»€éº¼", "myself": "æˆ‘è‡ªå·±",
            "funny": "æœ‰è¶£çš„", "every": "æ¯å€‹", "kitty": "å°è²“", "pretty": "æ¼‚äº®çš„", "baby": "å¬°å…’", "party": "æ´¾å°",

            // Consonant '-LE'
            "little": "å°çš„", "apple": "è˜‹æœ", "table": "æ¡Œå­",

            // Silent E
            "ate": "åƒ (éå»å¼)", "came": "ä¾† (éå»å¼)", "game": "éŠæˆ²",
            "name": "åå­—", "gave": "çµ¦äºˆ (éå»å¼)", "made": "è£½ä½œ (éå»å¼)", "make": "è£½ä½œ", "take": "æ‹¿", "cake": "è›‹ç³•",
            "here": "é€™è£¡",
            "five": "äº”", "like": "å–œæ­¡/åƒ", "ride": "é¨",
            "white": "ç™½è‰²", "fire": "ç«", "time": "æ™‚é–“",
            "before": "ä¹‹å‰", "home": "å®¶",

            // Vowel Teams
            "may": "å¯èƒ½", "day": "å¤©", "say": "èªª", "way": "æ–¹å¼", "play": "ç©", "away": "é›¢é–‹", "birthday": "ç”Ÿæ—¥", "rain": "é›¨", "chair": "æ¤…å­", "eight": "å…«",
            "see": "çœ‹", "feet": "è…³", "keep": "ä¿æŒ", "seed": "ç¨®å­", "sheep": "ç¶¿ç¾Š", "tree": "æ¨¹", "they": "ä»–å€‘", "sleep": "ç¡è¦º", "green": "ç¶ è‰²", "street": "è¡—é“", "clean": "ä¹¾æ·¨", "eat": "åƒ", "read": "é–±è®€", "money": "éŒ¢",
            "light": "å…‰/è¼•çš„", "right": "æ­£ç¢ºçš„/å³é‚Š", "night": "å¤œæ™š",
            "own": "è‡ªå·±çš„", "show": "å±•ç¤º", "grow": "ç”Ÿé•·", "snow": "é›ª", "yellow": "é»ƒè‰²",
            "window": "çª—æˆ¶",
            "boat": "èˆ¹",
            "coat": "å¤–å¥—",
            "soon": "å¾ˆå¿«", "too": "ä¹Ÿ/å¤ª", "school": "å­¸æ ¡", "blue": "è—è‰²", "new": "æ–°çš„",
            "good": "å¥½çš„", "look": "çœ‹", "wood": "æœ¨é ­",
            "saw": "çœ‹è¦‹ (éå»å¼)/é‹¸å­", "draw": "ç•«"
        };

        // Dolch words data organized by categories
        const dolchWordsData = {
            "ä¸è¦å‰‡æ‹¼å¯«å–®å­—": {
                ipa: null,
                count: 75,
                subcategories: {
                    "ç„¡è¦å‰‡å–®å­—": { ipa: null, count: 29, words: [
                        "again", "carry", "from", "only", "today", "very", "what", "your",
                        "because", "does", "goes", "please", "together", "walk", "who",
                        "been", "don't", "laugh", "said", "two", "warm", "work",
                        "buy", "four", "of", "their", "use", "was", "you"
                    ]},
                    "å­—å°¾ 's' ç™¼ /z/ éŸ³": { ipa: "/z/", words: ["has", "is", "as", "his"] },
                    "'v' å¾Œé¢æ¥ 'e' (è‹±èªå–®å­—ä¸ä»¥ 'v' çµå°¾)": { ipa: null, words: ["have", "give", "live"] },
                    "'o-e' ç™¼çŸ­ 'u' éŸ³": { ipa: "/ÊŒ/", words: ["some", "come", "done"] },
                    "'o' ç™¼ /u/ éŸ³ (å¦‚ boot)": { ipa: "/u/", words: ["to", "do", "into"] },
                    "ç›¸åŒå­—å°¾çš„æŠ¼éŸ»å–®å­—": { ipa: null, words: ["where", "there"] },
                    "éœéŸ³ 'e' å‰ 's' ç™¼ /z/ éŸ³": { ipa: "/z/", words: ["these", "those"] },
                    "åœ¨ -all æ¨¡å¼ä¸­ 'a' ç™¼ /É”/ éŸ³": { ipa: "/É”/", words: ["all", "call", "fall", "small", "ball"] },
                    "'oul' ç™¼ /ÊŠ/ éŸ³ (å¦‚ book)": { ipa: "/ÊŠ/", words: ["could", "would"] },
                    "æ¯éŸ³ + 'r' + 'e'": { ipa: null, words: ["were", "are"] },
                    "VCC å’Œ CVCC æ¨¡å¼ä¸­ 'o' ç™¼é•· 'o' éŸ³": { ipa: "/oÊŠ/", words: ["old", "cold", "told", "hold", "both"] },
                    "CVCC æ¨¡å¼ä¸­ 'i' ç™¼é•· 'i' éŸ³": { ipa: "/aÉª/", words: ["find", "kind"] },
                    "æ„ç¾©å’Œæ‹¼å¯«ç›¸ä¼¼çš„å–®å­—": { ipa: null, words: ["once", "one"] },
                    "'w' å¾Œçš„ 'a' æœ‰æ™‚ç™¼ /É‘/ éŸ³": { ipa: "/É‘/", words: ["want", "wash"] },
                    "'u' ç™¼ /ÊŠ/ éŸ³ (å¦‚ book)": { ipa: "/ÊŠ/", words: ["put", "full", "pull"] },
                    "æŠ¼éŸ»å–®å­— - 'a' ç™¼çŸ­ 'i' æˆ–çŸ­ 'e' éŸ³": { ipa: "/É›/", words: ["any", "many"] },
                    "'ea' ç™¼çŸ­ 'e' éŸ³": { ipa: "/É›/", words: ["head", "bread"] },
                    "'oor' ç™¼ /É”r/ éŸ³": { ipa: "/É”r/", words: ["door", "floor"] }
                }
            },
            "é–‰éŸ³ç¯€å–®å­— / çŸ­æ¯éŸ³": {
                ipa: null,
                subcategories: {
                    "çŸ­ 'a'": { ipa: "/Ã¦/", words: ["am", "an", "and", "at", "can", "had", "ran", "cat", "man"] },
                    "çŸ­ 'e'": { ipa: "/É›/", words: ["get", "let", "red", "ten", "yes", "bed", "egg", "leg", "men"] },
                    "çŸ­ 'i'": { ipa: "/Éª/", words: ["big", "did", "him", "if", "in", "it", "sit", "six", "pig"] },
                    "çŸ­ 'o'": { ipa: "/É‘/", words: ["got", "hot", "not", "on", "box", "dog", "top"] },
                    "çŸ­ 'u'": { ipa: "/ÊŒ/", words: ["but", "cut", "run", "up", "us", "sun"] },
                    "å¤šéŸ³ç¯€é–‰éŸ³ç¯€å–®å­—": { ipa: null, words: ["seven", "upon", "rabbit", "robin"] }
                }
            },
            "é‡è¤‡å­éŸ³å­—å°¾ (FLOSS-Z)": { ipa: null, words: ["off", "tell", "well", "will", "bell", "doll", "hill"] },
            "é›™å­—æ¯å­éŸ³ (Digraphs)": {
                ipa: null,
                subcategories: {
                    "'sh'": { ipa: "/Êƒ/", words: ["shall", "wish", "fish"] },
                    "'ch'": { ipa: "/tÊƒ/", words: ["much", "chicken"] },
                    "'th'": { ipa: "/Î¸/, /Ã°/", words: ["that", "them", "then", "this", "with"] },
                    "'wh'": { ipa: "/w/", words: ["when", "which"] },
                    "'-ng'": { ipa: "/Å‹/", words: ["sing", "long", "ring", "song", "thing"] },
                    "'-ck'": { ipa: "/k/", words: ["pick", "duck"] }
                }
            },
            "å­éŸ³ç¾¤ (Blends)": {
                ipa: null,
                subcategories: {
                    "å­—å°¾å­éŸ³ç¾¤": {
                        ipa: null,
                        words: [
                            "best", "nest", "fast", "just", "must", "jump", "went",
                            "ask", "thank", "think", "hand", "wind", "milk", "help"
                        ]
                    },
                    "å­—é¦–å­éŸ³ç¾¤": { ipa: null, words: ["black", "bring", "drink", "stop", "stick", "grass"] }
                }
            },
            "å­—å°¾å¾Œç¶´ (Suffixes)": { ipa: null, words: ["its", "going", "always"] },
            "æ¯éŸ³ + 'r'": {
                ipa: null,
                subcategories: {
                    "'ar'": { ipa: "/É‘r/", words: ["car", "far", "farm", "farmer", "start", "garden"] },
                    "'or'": { ipa: "/É”r/", words: ["or", "for", "corn", "morning"] },
                    "'er', 'ir', 'ur'": {
                        ipa: "/É/, /Éš/",
                        words: [
                            "girl", "bird", "first", "squirrel", "her", "hurt", "sister",
                            "mother", "brother", "letter", "paper", "under", "after", "better", "never"
                        ]
                    }
                }
            },
            "é–‹éŸ³ç¯€å–®å­—": {
                ipa: null,
                subcategories: {
                    "å–®ä¸€éŸ³ç´ éŸ³ç¯€": { ipa: null, words: ["a", "I"] },
                    "é•· 'e'": { ipa: "/i/", words: ["be", "he", "me", "she", "the", "we"] },
                    "é•· 'o'": { ipa: "/oÊŠ/", words: ["no", "go", "so", "open", "over"] },
                    "'y' ç™¼ 'i' éŸ³": { ipa: "/aÉª/", words: ["by", "my", "fly", "try", "why", "myself"] },
                    "'y' ç™¼ 'e' éŸ³": { ipa: "/i/", words: ["funny", "every", "kitty", "pretty", "baby", "party"] }
                }
            },
            "å­éŸ³ '-LE'": { ipa: null, words: ["little", "apple", "table"] },
            "é•·æ¯éŸ³ + éœéŸ³ 'e'": {
                ipa: null,
                subcategories: {
                    "é•· 'a'": { ipa: "/eÉª/", words: ["ate", "came", "game", "name", "gave", "made", "make", "take", "cake"] },
                    "é•· 'e'": { ipa: "/i/", words: ["here"] },
                    "é•· 'i'": { ipa: "/aÉª/", words: ["five", "like", "ride", "white", "fire", "time"] },
                    "é•· 'o'": { ipa: "/oÊŠ/", words: ["before", "home"] }
                }
            },
            "æ¯éŸ³çµ„åˆ (Vowel Teams)": {
                ipa: null,
                subcategories: {
                    "é•· 'a'": { ipa: "/eÉª/", words: ["may", "day", "say", "way", "play", "away", "birthday", "rain", "chair", "eight"] },
                    "é•· 'e'": { ipa: "/i/", words: ["see", "feet", "keep", "seed", "sheep", "tree", "they", "sleep", "green", "street", "clean", "eat", "read", "money"] },
                    "é•· 'i'": { ipa: "/aÉª/", words: ["light", "right", "night"] },
                    "é•· 'o'": { ipa: "/oÊŠ/", words: ["own", "show", "grow", "snow", "yellow", "window", "boat", "coat"] },
                    "/u/ éŸ³ (å¦‚ boot)": { ipa: "/u/", words: ["soon", "too", "school", "blue", "new"] },
                    "/ÊŠ/ éŸ³ (å¦‚ good)": { ipa: "/ÊŠ/", words: ["good", "look", "wood", "good-bye"] },
                    "/É”/ éŸ³ (å¦‚ saw)": { ipa: "/É”/", words: ["saw", "draw"] }
                }
            },
            "é›™æ¯éŸ³ (Diphthongs)": {
                ipa: null,
                subcategories: {
                    "/aÊŠ/ æ‹¼å¯«ç‚º 'ow'": { ipa: null, words: ["how", "now", "cow", "down", "flower", "brown"] },
                    "/aÊŠ/ æ‹¼å¯«ç‚º 'ou'": { ipa: null, words: ["our", "out", "about", "round", "around", "found", "ground"] },
                    "/É”Éª/": { ipa: "/É”Éª/", words: ["boy", "toy"] }
                }
            },
            "ä¸ç™¼éŸ³å­éŸ³å­—æ¯": { ipa: null, words: ["write", "know"] }
        };


        const categoryList = document.getElementById('category-list');
        const currentCategoryTitle = document.getElementById('current-category-title');
        const wordListContainer = document.getElementById('word-list');
        let main;
        var currentActiveTab = null;
        let currentAudio = null; // ç›®å‰æ­£åœ¨æ’­æ”¾çš„ audio

        function loadCategories() {
            if (typeof dolchWordsData === 'undefined') {
                console.error("Error: dolchWordsData is not defined. Script parsing might have failed earlier.");
                showMessageBox("è¼‰å…¥å–®å­—é¡åˆ¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¨‹å¼ç¢¼éŒ¯èª¤ã€‚", true);
                return;
            }

            categoryList.innerHTML = '';

            for (const categoryName in dolchWordsData) {
                const li = document.createElement('li');
                const button = document.createElement('button');
                let buttonText = categoryName;

                if (dolchWordsData[categoryName].count) {
                    buttonText += `ï¼ˆå…± ${dolchWordsData[categoryName].count} å­—ï¼‰`;
                } else if (dolchWordsData[categoryName].ipa) {
                    buttonText += ` - ${dolchWordsData[categoryName].ipa}`;
                }
                button.innerHTML = buttonText;
                button.classList.add('block', 'w-full', 'text-left', 'py-2', 'px-3', 'rounded-lg', 'text-gray-800', 'hover:bg-blue-100', 'hover:text-blue-700', 'transition-colors', 'duration-200', 'mb-2');
                button.onclick = () => displayWords(categoryName, button);
                li.appendChild(button);
                categoryList.appendChild(li);
            }
        }

        function displayWords(categoryName, clickedButton) {
            if (currentActiveTab) {
                currentActiveTab.classList.remove('active-tab', 'font-semibold');
            }
            clickedButton.classList.add('active-tab', 'font-semibold');
            currentActiveTab = clickedButton;

            let titleText = categoryName;
            if (dolchWordsData[categoryName].count) {
                titleText += `ï¼ˆå…± ${dolchWordsData[categoryName].count} å­—ï¼‰`;
            } else if (dolchWordsData[categoryName].ipa) {
                titleText += ` - ${dolchWordsData[categoryName].ipa}`;
            }
            currentCategoryTitle.innerHTML = titleText;
            wordListContainer.innerHTML = '';

            const categoryData = dolchWordsData[categoryName];

            if (categoryData.words) {
                categoryData.words.forEach(word => {
                    wordListContainer.appendChild(createWordElement(word));
                });
            } else if (categoryData.subcategories) {
                for (const subcategoryName in categoryData.subcategories) {
                    const subcategoryData = categoryData.subcategories[subcategoryName];

                    const subcategoryDiv = document.createElement('div');
                    subcategoryDiv.classList.add('col-span-full', 'mb-4');
                    let subcategoryTitleHtml = `<h3 class="text-xl font-medium mb-3 text-gray-600">${subcategoryName}`;
                    if (subcategoryData.count) {
                        subcategoryTitleHtml += `ï¼ˆå…± ${subcategoryData.count} å­—ï¼‰`;
                    } else if (subcategoryData.ipa && !subcategoryName.includes(subcategoryData.ipa)) {
                        subcategoryTitleHtml += ` - ${subcategoryData.ipa}`;
                    }
                    subcategoryTitleHtml += `</h3>`;
                    subcategoryDiv.innerHTML = subcategoryTitleHtml;

                    const subcategoryWordsGrid = document.createElement('div');
                    subcategoryWordsGrid.classList.add('grid', 'grid-cols-1', 'md:grid-cols-2', 'lg:grid-cols-3', 'gap-4', 'mb-6');

                    subcategoryData.words.forEach(word => {
                        subcategoryWordsGrid.appendChild(createWordElement(word));
                    });
                    subcategoryDiv.appendChild(subcategoryWordsGrid);
                    wordListContainer.appendChild(subcategoryDiv);
                }
            }
            if (main) {
                main.scrollTop = 0;
            } else {
                console.error("Error: main element not found for scrolling.");
            }
        }

        function createWordElement(word) {
            const wordDiv = document.createElement('div');
            wordDiv.classList.add('word-item');
            const ipa = getIpaForWord(word);
            const displayWord = (word.toLowerCase() === 'i') ? 'I' : word;
            const translation = wordTranslations[word.toLowerCase()] || "";

            wordDiv.innerHTML = `
                <div class="word-item-content">
                    <span class="word-text">${displayWord} ${translation}</span>
                    <div class="ipa-text">${ipa}</div>
                    <button class="play-button" data-word="${word}">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.026A1 1 0 008 8v4a1 1 0 001.555.974l3.5-2a1 1 0 000-1.948l-3.5-2z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            `;
            wordDiv.querySelector('.play-button').addEventListener('click', (event) => playWord(event.currentTarget));
            return wordDiv;
        }

        // ğŸ”Š æ”¹æˆä½¿ç”¨ repo è£¡çš„ .mp3 éŸ³æª”ï¼Œè€Œä¸æ˜¯ Web Speech API
        async function playWord(button) {
            const word = button.dataset.word;
            const fileKey = word.toLowerCase(); // æª”åç”¨å°å¯«
            const audioPath = `audio/${encodeURIComponent(fileKey)}.mp3`;
            const originalButtonContent = button.innerHTML;

            // è‹¥æœ‰ä¸Šä¸€å€‹éŸ³æª”åœ¨æ’­ï¼Œå…ˆåœæ‰
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }

            button.disabled = true;
            button.innerHTML = '<div class="loading-spinner"></div>';

            try {
                const audio = new Audio(audioPath);
                currentAudio = audio;

                audio.onended = () => {
                    if (button) {
                        button.innerHTML = originalButtonContent;
                        button.disabled = false;
                    }
                    currentAudio = null;
                };

                audio.onerror = () => {
                    showMessageBox(`æ‰¾ä¸åˆ°æˆ–ç„¡æ³•æ’­æ”¾éŸ³æª”ï¼š${audioPath}`, true);
                    button.innerHTML = originalButtonContent;
                    button.disabled = false;
                    currentAudio = null;
                };

                await audio.play();
            } catch (error) {
                console.error('Error playing audio file:', error);
                showMessageBox(`æ’­æ”¾ã€Œ${word}ã€æ™‚ç™¼ç”ŸéŒ¯èª¤ã€‚è«‹å†è©¦ä¸€æ¬¡ã€‚`, true);
                button.innerHTML = originalButtonContent;
                button.disabled = false;
                currentAudio = null;
            }
        }

        window.onload = function() {
            main = document.getElementById('main');
            loadCategories();
            const firstCategoryButton = categoryList.querySelector('button');
            if (firstCategoryButton) {
                firstCategoryButton.click();
            } else {
                showMessageBox("æ²’æœ‰å¯ç”¨çš„å–®å­—é¡åˆ¥ã€‚è«‹æª¢æŸ¥è³‡æ–™ä¾†æºã€‚", true);
            }
        };
    </script>
</body>
</html>


